<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì§„ì—”ë”© - ë³µìˆ˜ì˜ ì™„ì„±</title>
  <link rel="stylesheet" href="../style.css" />
  <script src="../inventory.js"></script>
  <script src="../journal.js"></script>
</head>
<body>
  <div class="game-layout">
    <!-- ì™¼ìª½ ê²Œì„ ì˜ì—­ -->
    <div class="game-area">
      <!-- ê·¸ë¦¼ ì˜ì—­ -->
      <div class="image-area">
        <img src="../IMG/íŠ¸ë£¨ì—”ë”©.png" alt="ì§„ ì—”ë”©" style="width: 100%; height: 100%; object-fit: cover; border-radius: 10px;">
      </div>

      <!-- ê²Œì„ ì»¨í…Œì´ë„ˆ -->
      <div id="game-container">
        <div id="scene-text">
          ì‹¤í—˜ìì˜ ì—´ì‡ ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¹ì‹ ì€ ë³µìˆ˜ì˜ ê¸¸ì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤. ì´ì œ ëª¨ë“  ê²ƒì´ ëë‚˜ëŠ” ìˆœê°„ì…ë‹ˆë‹¤.
        </div>

        <div class="ending-content">
          <div class="ending-text">
            <h2 style="color: #f44336; margin-bottom: 20px;">âš”ï¸ ë³µìˆ˜ì˜ ì™„ì„±</h2>
            <p style="color: #e8f4fd; line-height: 1.8; margin-bottom: 20px;">
              ì‹¤í—˜ìì˜ ì—´ì‡ ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¹ì‹ ì€ ì‹¤í—˜ ì‹œì„¤ì˜ ëª¨ë“  ë¬¸ì„ ì—´ì—ˆìŠµë‹ˆë‹¤. 
              ê¸°ì–µ ì†ì—ì„œ ì‹¤í—˜ìë“¤ì´ ë‹¹ì‹ ì—ê²Œ ê°€í•œ ê³ í†µì´ ì„ ëª…í•˜ê²Œ ë– ì˜¤ë¦…ë‹ˆë‹¤.
            </p>
            <p style="color: #e8f4fd; line-height: 1.8; margin-bottom: 20px;">
              ì‹¤í—˜ìë“¤ì€ ë‹¹ì‹ ì˜ ë³µìˆ˜ì— ëŒ€í•œ ë‘ë ¤ì›€ì— ë–¨ê³  ìˆìŠµë‹ˆë‹¤. 
              ê·¸ë“¤ì´ ë§Œë“  ê´´ë¬¼ì´ ì´ì œ ê·¸ë“¤ì„ í–¥í•´ ëŒì•„ì„°ìŠµë‹ˆë‹¤.
            </p>
            <p style="color: #e8f4fd; line-height: 1.8; margin-bottom: 20px;">
              ë‹¹ì‹ ì€ ì‹¤í—˜ìë“¤ì„ í•˜ë‚˜ì”© ì°¾ì•„ë‚´ì–´ ê·¸ë“¤ì´ ë‹¹ì‹ ì—ê²Œ ê°€í•œ ê³ í†µì„ 
              ë˜‘ê°™ì´ ë˜ëŒë ¤ì£¼ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ê·¸ë“¤ë„ ì‹¤í—˜ì²´ê°€ ë˜ì–´ ê³ í†µë°›ê²Œ ë©ë‹ˆë‹¤.
            </p>
            <p style="color: #f44336; font-weight: 600; font-size: 18px;">
              "ì´ì œ ë‹¹ì‹ ë“¤ì´ ì‹¤í—˜ì²´ê°€ ë˜ì–´ë³´ì„¸ìš”. ê³ í†µì˜ ì˜ë¯¸ë¥¼ ì œëŒ€ë¡œ ì•Œê²Œ ë  ê²ƒì…ë‹ˆë‹¤."
            </p>
          </div>

          <div class="ending-actions">
            <button onclick="restartGame()" class="game-button primary">
              <span class="button-icon">ğŸ”„</span>
              <span class="button-text">ê²Œì„ ë‹¤ì‹œ ì‹œì‘</span>
            </button>
            <button onclick="goToMain()" class="game-button secondary">
              <span class="button-icon">ğŸ </span>
              <span class="button-text">ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</span>
            </button>
          </div>
        </div>

        <div id="message" class="message-display"></div>
      </div>
    </div>

    <!-- ì˜¤ë¥¸ìª½ ì‚¬ì´ë“œë°” -->
    <div class="sidebar">
      <!-- ì¸ë²¤í† ë¦¬ì™€ ì¼ì§€ê°€ ì—¬ê¸°ì— ìë™ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
    </div>
  </div>

  <style>
    .ending-content {
      background: linear-gradient(145deg, rgba(26, 26, 46, 0.9) 0%, rgba(22, 33, 62, 0.9) 100%);
      border: 2px solid rgba(244, 67, 54, 0.4);
      border-radius: 20px;
      padding: 30px;
      margin: 20px 0;
      backdrop-filter: blur(15px);
    }

    .ending-text {
      text-align: center;
      margin-bottom: 30px;
    }

    .ending-actions {
      display: flex;
      gap: 20px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .game-button {
      display: flex;
      align-items: center;
      gap: 12px;
      background: linear-gradient(135deg, rgba(74, 158, 255, 0.2) 0%, rgba(41, 128, 185, 0.2) 100%);
      border: 2px solid rgba(74, 158, 255, 0.4);
      border-radius: 12px;
      padding: 16px 24px;
      color: #e8f4fd;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      transition: all 0.3s ease;
      min-width: 180px;
      justify-content: center;
    }

    .game-button:hover {
      background: linear-gradient(135deg, rgba(74, 158, 255, 0.3) 0%, rgba(41, 128, 185, 0.3) 100%);
      border-color: rgba(74, 158, 255, 0.6);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(74, 158, 255, 0.3);
    }

    .game-button.primary {
      background: linear-gradient(135deg, #4a9eff 0%, #2980b9 100%);
      border-color: #4a9eff;
      color: white;
    }

    .game-button.primary:hover {
      background: linear-gradient(135deg, #5ba9ff 0%, #3a90ca 100%);
      transform: translateY(-2px);
      box-shadow: 0 5px 20px rgba(74, 158, 255, 0.4);
    }

    .game-button.secondary {
      background: linear-gradient(135deg, rgba(108, 117, 125, 0.2) 0%, rgba(73, 80, 87, 0.2) 100%);
      border-color: rgba(108, 117, 125, 0.4);
    }

    .game-button.secondary:hover {
      background: linear-gradient(135deg, rgba(108, 117, 125, 0.3) 0%, rgba(73, 80, 87, 0.3) 100%);
      border-color: rgba(108, 117, 125, 0.6);
    }

    .button-icon {
      font-size: 18px;
      min-width: 24px;
    }

    .button-text {
      font-size: 16px;
    }

    .message-display {
      background: linear-gradient(135deg, rgba(74, 158, 255, 0.1) 0%, rgba(41, 128, 185, 0.1) 100%);
      border: 1px solid rgba(74, 158, 255, 0.3);
      border-radius: 15px;
      padding: 20px;
      margin: 20px 0;
      text-align: center;
      color: #4a9eff;
      font-weight: 600;
      min-height: 20px;
      backdrop-filter: blur(10px);
    }

    #scene-text {
      background: linear-gradient(135deg, rgba(244, 67, 54, 0.1) 0%, rgba(211, 47, 47, 0.1) 100%);
      border: 1px solid rgba(244, 67, 54, 0.3);
      border-radius: 15px;
      padding: 25px;
      margin: 20px 0;
      color: #e8f4fd;
      font-size: 16px;
      line-height: 1.6;
      backdrop-filter: blur(10px);
      text-align: center;
    }

    .fade-in {
      animation: fadeIn 1.5s ease-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>

  <script>
    function restartGame() {
      // ê²Œì„ ë°ì´í„° ì´ˆê¸°í™”
      localStorage.clear();
      
      // ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™
      window.location.href = '../rooms1/index.html';
    }

    function goToMain() {
      // ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™ (ë°ì´í„° ìœ ì§€)
      window.location.href = '../rooms1/index.html';
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
    document.addEventListener('DOMContentLoaded', () => {
      // ì¼ë°˜ ì•„ì´í…œë§Œ ì´ˆê¸°í™” (ì¤‘ìš” ì•„ì´í…œì€ ìœ ì§€)
      if (window.inventory) {
        window.inventory.clearNormalInventory();
      }
      
      // ì‹¤í—˜ìì˜ ì—´ì‡ ê°€ ìˆëŠ”ì§€ í™•ì¸
      if (hasInImportantInventory('ì‹¤í—˜ìì˜ ì—´ì‡ ')) {
        addJournalEntry('ì§„ì—”ë”©ì„ ë§ì´í–ˆìŠµë‹ˆë‹¤. ì‹¤í—˜ìì˜ ì—´ì‡ ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³µìˆ˜ì— ì„±ê³µí–ˆìŠµë‹ˆë‹¤.', 'ending');
      } else {
        // ì—´ì‡ ê°€ ì—†ìœ¼ë©´ ë°°ë“œì—”ë”©ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
        addJournalEntry('ì‹¤í—˜ìì˜ ì—´ì‡  ì—†ì´ ì§„ì—”ë”©ì— ì ‘ê·¼í–ˆìŠµë‹ˆë‹¤. ë°°ë“œì—”ë”©ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.', 'ending');
        setTimeout(() => {
          window.location.href = 'bad_ending.html';
        }, 2000);
        return;
      }
      
      // í˜ì´ë“œì¸ íš¨ê³¼ ì ìš©
      const endingContent = document.querySelector('.ending-content');
      endingContent.classList.add('fade-in');
    });
  </script>
</body>
</html>
